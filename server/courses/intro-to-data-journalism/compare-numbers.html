<header>
  <h1>Comparing numbers</h1>
  <p>Learn three common types of comparisons and how to calculate them: difference, ratio, and percentage change.</p>
  <img src="./banner.svg" alt="">
</header>

<section class="fullscreen">
  <h2>Introduction</h2>
  <p>
    Is $1,000,000 large or small? It could be a big number in a city budget, or it could be a small one in a national budget. Most numbers don’t mean very much without some sort of comparison.
  </p>
  <p>
    In this lesson we will use data from the United States Census bureau to learn three common types of comparisons:
    difference, ratio, and percentage change. You'll also learn how to calculate each with <kbd>Formula</kbd>.
  </p>
</section>

<script id="initialWorkflow">
tabs:
- name: Lesson
  wfModules:
  - module: loadurl
    slug: step-loadurl
    params:
      url: ./us-census-counties.csv
    collapsed: true
    note: "Source: U.S. Census bureau"
</script>

<section>
  <h2>Data</h2>
  <p>
    This Census data loaded in step 1 is published by the United States Census bureau <a class="highlight" href='https://factfinder.census.gov/faces/nav/jsf/pages/index.xhtml' target="_blank" className="info-1">here</a>.
  </p>
  <p>
    The census happens every 10 years. The last one was in 2010, and every year since then is an estimate based on more recent surveys.
  </p>
  <h3 class="instructions">Instructions</h3>
  <p class="instruction-detail">Look at this table and answer these questions for yourself:</p>
  <ul>
    <li>What does each row represent?</li>
    <li>What's in each column?</li>
    <li>Are there any columns, values or codes you don't understand?</li>
    <li>Are there missing or obviously wrong values?</li>
    <li>Does the data need to be cleaned?</li>
  </ul>
</section>

<section>
  <h2>Difference</h2>
  <p>
    Let’s ask: 'Which county had the greatest population decrease from 2010 to 2017?'
    We need to calculate the difference in population, which is a simple subtraction.
  </p>
  <h3 class="instructions">Instructions</h3>
  <ol class="steps">
    <li
      data-test="return workflow.tabs[0].wfModuleSlugs[1] === 'formula'"
      >Add <kbd>Formula</kbd>
    </li>
    <li
      data-test="const wfm = workflow.tabs[0].wfModules[1]; if (!wfm || wfm.moduleSlug !== 'formula' || wfm.params.syntax !== 'excel' || !wfm.params.all_rows) return false; const f = wfm.params.formula_excel.replace(/ /g, ''); return f === '=D1-C1' || f === '=(D1-C1)'"
      >Type in the following formula:
      <div class="copy-txt">=D1-C1</div>
    </li>
    <li
      data-test="return workflow.tabs[0].wfModules[1].params.out_column === 'Difference'"
      >Name the new column <kbd>Difference</kbd>.
      <p class="instruction-detail">
        A positive numbers means that the population increased, while a negative number means that the county’s population decreased.
      </p>
    </li>
    <li
      data-test="const wfm = workflow.tabs[0].wfModules[2]; if (!wfm || wfm.moduleSlug !== 'sort') return false; const p = wfm.params; return p.keep_top === '' && p.sort_columns[0] && p.sort_columns[0].colname === 'Difference' && p.sort_columns[0].is_ascending"
      >Sort <kbd>Difference</kbd> in ascending order.
      <p class="instruction-detail">
        The first row displays the largest negative number, meaning the county with the greatest population loss.
      </p>
    </li>
  </ol>
</section>

<section>
  <h2>Ratio</h2>
  <p>
    Larger counties are likely to have a greater population change. Let’s reframe:
  </p>
  <p>
    "Relative to its size, which county has lost or gained the most population?"
  </p>
  <p>
    The formula to calculate ‘How many (X) per (Y)’ is a simple division, also called a ratio:
  </p>
  <div class="copy-txt">=X/Y</div>
  <h3 class="instructions">Instructions</h3>
  <ol class="steps">
    <li
      data-test="const wfm = workflow.tabs[0].wfModules[3]; if (!wfm || wfm.moduleSlug !== 'formula' || wfm.params.syntax !== 'excel' || !wfm.params.all_rows) return false; const f = wfm.params.formula_excel.replace(/ /g, ''); return f === '=D1/C1' || f === '=(D1/C1)'"
      >Add a new Formula as step 4 (keep the previous one) and type in:
      <div class="copy-txt">=D1/C1</div>
    </li>
    <li
      data-test="return workflow.tabs[0].wfModules[3].params.out_column === 'Ratio'"
      >Name the new column <kbd>Ratio</kbd>
    </li>
    <li
      data-test="const wfm = workflow.tabs[0].wfModules[4]; if (!wfm || wfm.moduleSlug !== 'sort') return false; const p = wfm.params; return p.keep_top === '' && p.sort_columns[0] && p.sort_columns[0].colname === 'Ratio' && p.sort_columns[0].is_ascending"
      >Sort <kbd>Ratio</kbd> in ascending order.
      <p class=instruction-detail>
        A ratio of 1 means that for every person in 2010, there is exactly 1 person in 2017.
      </p>
      <p class=instruction-detail>
        Numbers greater than 1 mean the population increased. Less than 1 means the population decreased.
        A ratio of 2 would mean that the population doubled; 0.5 would mean that the population halved.
      </p>
    </li>
  </ol>
</section>
<section>
  <h2>Percentage</h2>
  <p>
    There is a close relationship between ratios and percentages.
    A percentage is simply a fraction (a ratio) multiplied by 100:
  </p>
  <div class="copy-txt">=(X/Y)*100</div>
  <h3 class="instructions">Instructions</h3>
  <ol class="steps">
    <li
      data-test="const wfm = workflow.tabs[0].wfModules[5]; if (!wfm || wfm.moduleSlug !== 'formula' || wfm.params.syntax !== 'excel' || !wfm.params.all_rows) return false; const f = wfm.params.formula_excel.replace(/ /g, ''); return f === '=D1/C1*100' || f === '=(D1/C1)*100' || f === '=F1*100'"
      >Add another Formula and type in:
      <div class="copy-txt">=(D1/C1)*100</div>
    </li>
    <li
      data-test="return workflow.tabs[0].wfModules[5].params.out_column === 'Percentage'"
      >Name the new column <kbd>Percentage</kbd>
      <p class="instruction-detail">
        The numbers in this new column are obviously similar to the <kbd>Ratio</kbd> column - just multiplied by 100.<!-- The formula <kbd>=F1*100</kbd> is equivalent. -->
      </p>
      <p class="instruction-detail">
        Percentages allow us to better grasp numbers. For instance: "In 2017, the population of Concho county was 66.6% the size it was in 2010."
      </p>
    </li>
  </ol>
</section>
<section>
  <h2>Calculating Percentage Change</h2>
  <p>
    Percentage change is the difference between old and new numbers, expressed as a percentage of the old number.
  </p>
  <p>
    The formula to calculate the percentage change between and Old and New numbers is:
  </p>
  <div class="copy-txt">=((New - Old) / Old)* 100</div>
  <h3 class="instructions">Instructions</h3>
  <ol class="steps">
    <li
      data-test="const wfm = workflow.tabs[0].wfModules[6]; if (!wfm || wfm.moduleSlug !== 'formula' || wfm.params.syntax !== 'excel' || !wfm.params.all_rows) return false; const f = wfm.params.formula_excel.replace(/ /g, ''); return f === '=((D1-C1)/C1)*100' || f === '=(D1-C1)/C1*100' || f === '=(E1-C1)*100' || f === '=((D1/C1)-1)*100' || f === '=(D1/C1*100)-100' || f === '=D1/C1*100-100' || f === '=(F1-1)*100' || f === '=G1-100' || f === '(G1-100)'"
      >Add another Formula step and this time apply the percentage formula:
      <div class="copy-txt">=((D1 - C1) / C1) * 100</div>
    </li>
    <li
      data-test="return workflow.tabs[0].wfModules[6].params.out_column === 'Percentage change'"
      >Name the new column <kbd>Percentage change</kbd>
      <p class="instruction-detail">
        A result of 100% means the value doubled; 0% means it stayed the same; and -50% means the new number is half the old one.
      </p>
      <p class="instruction-detail">
        Percentage change allows us to describe our numbers in yet a new way: "From 2010 to 2017, Concho county lost 33.7% of its population."
      </p>
    </li>
  </ol>
</section>
<footer>
  <h2>Lesson Complete!</h2>
  <div class="completed">
    <p class="summary">Another type of comparaison is needed to compare prices through time. Next, we’ll learn how to clean open data, join, and adjust salaries for inflation.
    </p>
  </div>
  <div class="next">
    <h2>Next</h2>
    <ol>
      <li>
        <a href="inflation">Adjusting teacher salaries for inflation</a>
      </li>
    </ol>
  </div>
</footer>
