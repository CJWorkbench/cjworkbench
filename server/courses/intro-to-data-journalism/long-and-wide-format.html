<header>
  <h1>Long and wide format</h1>
  <p>Learn the difference between “long” and “wide” table formats</p>
  <img src="./banner.svg">
</header>

<section class="fullscreen">
  <h2>Introduction</h2>
  <p>
    Data can be organized into tables in different ways. In this lesson, you will learn to recognize “long” and “wide” formats and convert from one to another, which is called reshaping.
  </p>
  <p>
    In this lesson we will work with a month of the same data we used in the previous lesson, on police incidents reported in the City of New York.
</section>
<script id="initialWorkflow">
tabs:
- name: Lesson
  wfModules:
  - module: loadurl
    params:
      url: './NYC-data-long-format.csv'
  - module: convert-date
    params:
      colnames: Complaint date
</script>

<section class="fullscreen">
  <h2> </h2>
  <p>
    <b>Wide format</b> is the most common table format. Each different type of measurement is in its own column. In this case there is one column per borough.<br>
  </p>
  <figure>
    <img class="no-border full-width" alt="Inspect element" src="./wide-table.png">
  </figure>

  <p><b>Long format</b> tables contain only one column with measured values, in this case <kbd>Count of incidents</kbd>.
    All other columns that describe what is measured in that row. In this case, each available <kbd>Complaint date</kbd> is combined with each unique <kbd>Borough</kbd>.
  </p>
<!--
  <p><b>Long format</b> tables contain only one column with measured values.<br>In this case <kbd>Count of incidents</kbd>. All other columns are variables that describe what is measured.
  </p>
  <p>
    Each row is a unique combination of those variables.<br> In this case, each available <kbd>Complaint date</kbd> is combined with each unique <kbd>Borough</kbd>.
  </p>
-->
  <figure>
    <img class="no-border half-width" alt="Inspect element" src="./long-table.png">
  </figure>
<!--
  <p>
    <b>Wide formats</b> are the most common table format. In a wide format. there are one or more columns that describe what is measured, in this case <kbd>Complaint date</kbd>. These columns are called “Row variables".<br>
    All other column names are called "Column variables", as they also describe what is measured - in this case each <kbd>Borough</kbd>. All remaining cells contain the actual measurements.
  </p>
  <figure>
    <img class="no-border full-width" alt="Inspect element" src="./wide-table.png">
  </figure>
-->
</section>
<section>
  <h2>Converting to wide format</h2>
  <p>
    Our goal is to visualize the volume of incidents reported in each borough, for each day.
  </p>
  <p>
    All dates must be in one column so that we can select them all at once and display them on X axis, and each borough must be in its own column, so that we plot any of them on the Y axis.
  </p>
  <h3 class="instructions">Instructions</h3>
  <ol class="steps">
    <li
      data-test="
        return workflow.tabs[0].wfModuleSlugs[2] === 'reshape' &&
               workflow.tabs[0].wfModules[2].params.direction== 'longtowide'"
      >Add ‘Reshape’, and select <kbd>Long to wide</kbd>.
    </li>
    <li
      data-test="
        return workflow.tabs[0].wfModules[2].params.colnames == 'Complaint date'"
      >Select <kbd>Complaint date</kbd> as the <kbd>Row variable</kbd>.
    </li>
    <li
      data-test="
        return workflow.tabs[0].wfModules[2].params.varcol == 'Borough'"
      >Select <kbd>Borough</kbd>for the <kbd>Column variable</kbd>.
    </li>
  </ol>
</section>
<section>
  <h2>Visualizing</h2>
  <p>
    The table is ready for us to visualize our grouped police incident data.
  </p>
  <p>
    Let’s visually compare the volume of reported police incidents in different boroughs, using a line chart.
  </p>
  <ol class="steps">
    <li
      data-test="
      return workflow.tabs[0].wfModuleSlugs[3] === 'linechart' &&
             workflow.tabs[0].wfModules[3].params.x_column === 'Complaint date'"
      >Add a line chart, and choose <kbd>Complaint date</kbd> for the X axis.
    </li>
    <li
      data-test="return workflow.tabs[0].wfModules[3].params.y_columns.length >= 1"
      >Add any borough for the Y axis, to create the first line on the chart.
    </li>
    <li
      data-test="return workflow.tabs[0].wfModules[3].params.y_columns.length >= 2"
      >Add <span>
        <img class="icon-insert" src="images/lesson-icons/add.svg">
      </span>one column on the Y axis for each additional <kbd>Borough</kbd> you want to compare.
    </li>
  </ol>
</section>
<footer>
  <h2>Lesson Complete!</h2>
  <div class="completed">
    <p class="summary">In this chart we’re comparing volumes of incidents between boroughs with very different population size. In the next lesson, we’ll look at how to compare ‘per capita'.</p>
  </div>
  <div class="next">
    <h2>Next</h2>
    <ol>
      <li>
        <a href="per-capita">Per capita</a>
      </li>
    </ol>
  </div>
</footer>
