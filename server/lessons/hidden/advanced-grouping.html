<header>
  <h1>Grouping by dates, and multiple columns<h1>
</header>

<section class="fullscreen">
  <h2>Introduction</h2>
  <p>
    In the last lesson we learned how to ensure that a column of dates has the correct “Date” type.
    Now we’re ready to group by date, using the same police incident data from the City of New York, <a class="highlight" href='https://data.cityofnewyork.us/Public-Safety/NYPD-Complaint-Data-Current-Year-To-Date-/5uac-w243/data' target="_blank" className="info-1">here</a>.
  </p>
  <p>
    We’ll answer the question: how many incidents happened each month in each borough of the city?
  </p>
</section>

<!-- Section 1 -->

<script id="initialWorkflow" type="application/json">
  {
    "tabs": [
      {
        "name": "Lesson",
        "wfModules": [
          {
            "module":"loadurl",
            "params": {
              "url":"http://production-static.workbenchdata.com/data/intro-data-j/NYC-incidents-Jan-feb-2018.csv"
            }
          }
        ]
      },
      {
        "name": "Data dictionary",
        "wfModules": [
          {
            "module":"loadurl",
            "params": {
              "url":"http://production-static.workbenchdata.com/data/intro-data-j/NYPD_Complaint_YTD_DataDictionary.csv"
            }
          }
        ]
      }
    ]
  }
</script>
<section>
  <h2>Grouping by date</h2>
  <p>
    Our first question is ‘how many incidents were reported each month, in the entire city?’
  </p>
  <h3 class="instructions">Instructions</h3>
  <ol class="steps">
    <li
      data-highlight='[{"type":"Module","index":0,"name":"Add from URL"}]'
      data-test="return workflow.tabs[0].wfModuleNames[0] === 'Add from URL'"
      >Add <kbd>Group</kbd>, and select the column <kbd>Complaint date</kbd>.
    </li>
    <li
      data-highlight='[{"type":"Module","index":0,"name":"Add from URL"}]'
      data-test="return workflow.tabs[0].wfModuleNames[0] === 'Add from URL'"
      >Check <kbd>Group dates</kbd> and select <kbd>by month</kbd> as granularity
    </li>
    <li
      data-highlight='[{"type":"Module","index":0,"name":"Add from URL"}]'
      data-test="return workflow.tabs[0].wfModuleNames[0] === 'Add from URL'"
      >Name the output column 'Count of incidents'.
    </li>
  </ol>
</section>
<section>
  <h2>Granularity</h2>
  <p>
    Let’s visualize this data in a line chart.
  </p>
  <h3 class="instructions">Instructions</h3>
  <ol class="steps">
    <li
      data-highlight='[{"type":"Module","index":0,"name":"Add from URL"}]'
      data-test="return workflow.tabs[0].wfModuleNames[0] === 'Add from URL'"
      >Add a Line chart. Choose <kbd>Complaint date</kbd> as the X axis and plot <kbd>Count</kbd> on the Y-axis.
      <p class="intstruction-detail">To visualize the same data but for each day, we can change the granularity of the group.</p>
    </li>
    <li
      data-highlight='[{"type":"Module","index":0,"name":"Add from URL"}]'
      data-test="return workflow.tabs[0].wfModuleNames[0] === 'Add from URL'"
      >In step 6, change the granularity to <kbd>by day</kbd>
    </li>
  </ol>
</section>
<section>
  <h2>Grouping by multiple columns</h2>
  <p>
    Now let’s break this data down further, by borough.
  </p>
  <h3 class="instructions">Instructions</h3>
  <ol class="steps">
    <li
      data-highlight='[{"type":"Module","index":0,"name":"Add from URL"}]'
      data-test="return workflow.tabs[0].wfModuleNames[0] === 'Add from URL'"
      >In the Group step, press <kbd>+Add</kbd> to add another column to group by
    </li>
    <li
      data-highlight='[{"type":"Module","index":0,"name":"Add from URL"}]'
      data-test="return workflow.tabs[0].wfModuleNames[0] === 'Add from URL'"
      >Add the <kbd>Borough</kbd> column using the same column selector as <kbd>Complaint date</kbd>
      <p class="instruction-detail">
        By looking at this table we can rapidly see if different parts of town have different patterns of crime -- or at least reported incidents. It’s important to remember that data only exists when someone types it in.
      </p>
      <p class="instruction-detail">
        However, after being grouped by more than one column the table cannot be visualized with one line per borough, because that would require the data for each borough in its own column.
      </p>
      <p class="instruction-detail">
        In the next lesson, we’ll learn how to change table formats from Long to Wide to solve this.
      </p>
    </li>
  </ol>
</section>
<footer>
  <h2>Lesson Complete!</h2>
  <div class="completed">
    <p class="summary"> Next, we’ll learn about long and wide format.</p>
  </div>
  <div class="next">
    <h2>Next lesson</h2>
    <ol>
      <li>
        <a href="/lessons/long-and-wide-format">Long and wide format</a>
      </li>
    </ol>
  </div>
</footer>
