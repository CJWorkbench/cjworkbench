<header>
  <h1>Summarizing data by grouping<h1>
</header>

<section class="fullscreen">
  <h2>Introduction</h2>
  <p>
    Grouping rows together is one of the most powerful ways of understanding data. This operation is sometimes called “pivot tables” or “Group by”. Its purpose is to summarize large amounts of data quickly.
  <p>
    In this lesson we will continue working with San Francisco Housing data to analyze how many affordable units are planned to be built in each neighborhood of the city.
  </p>
</section>

<!-- Section 1 -->

<script id="initialWorkflow" type="application/json">
  {
    "tabs": [
      {
        "name": "Lesson",
        "wfModules": [
          {
            "module":"loadurl",
            "params": {
              "url":"https://raw.githubusercontent.com/pierreconti/Data/master/cuomo-campaign-contributions.csv"
            }
          }
        ]
      }
    ]
  }
</script>

<section>
  <h2>Grouping and counting</h2>
  <p>In the previous lesson, we filtered <a class="highlight" href='https://data.sfgov.org/Housing-and-Buildings/Affordable-Housing-Pipeline/aaxw-2cb8' target="_blank" className="info-1">San Francisco Housing data</a> to reveal sizable new constructions containing a majority of affordable units. Let’s now find out how many of these projects are in each neighborhood.
  </p>
  <h3 class="instructions">Instructions</h3>
  <ol class="steps">
    <li
      data-highlight='[{"type":"Module","index":0,"name":"Add from URL"}]'
      data-test="return workflow.tabs[0].wfModuleNames[0] === 'Add from URL'"
      >Add 'Group' and select the column <kbd>Neighborhood</kbd>.
    </li>
    <li
      data-highlight='[{"type":"Module","index":0,"name":"Add from URL"}]'
      data-test="return workflow.tabs[0].wfModuleNames[0] === 'Add from URL'"
      >Keep the first operation set to <kbd>count</kbd>. It will count all rows within each group.
      <p class ="instruction-detail">
        Since each row is one project and rows are grouped by neighborhood, the output table is a count of projects per neighborhood.
      </p>
    </li>
    <li
      data-highlight='[{"type":"Module","index":0,"name":"Add from URL"}]'
      data-test="return workflow.tabs[0].wfModuleNames[0] === 'Add from URL'"
      >Name the new  column to <kbd>Number of projects</kbd>.
    </li>
  </ol>
</section>
<section>
  <h2>Operations within groups</h2>
  <p>
    Just counting projects gives us little information about the number of new housing units. Instead let’s sum the number of affordable units are planned to be built in each neighborhood.
  </p>
  <h3 class="instructions">Instructions</h3>
  <ol class="steps">
    <li
      data-highlight='[{"type":"Module","index":0,"name":"Add from URL"}]'
      data-test="return workflow.tabs[0].wfModuleNames[0] === 'Add from URL'"
      >Change <kbd>Count</kbd> to <kbd>Sum</kbd> and choose the column <kbd>affordable units</kbd> as the target.
    </li>
    <li
      data-highlight='[{"type":"Module","index":0,"name":"Add from URL"}]'
      data-test="return workflow.tabs[0].wfModuleNames[0] === 'Add from URL'"
      >Name the new column ‘Sum of affordable units’
      <p class="instruction-detail">
        We are still grouping by “Neighborhood”, but now we are calculating the sum of the values of the “Affordable_units” within each neighborhood group.
      </p>
    </li>
  </ol>
</section
<section>
<footer>
  <h2>Lesson Complete!</h2>
  <div class="completed">
    <p class="summary"> Next, we’ll look at using Group to report on campaign finance data.</p>
  </div>
  <div class="next">
    <h2>Next lesson</h2>
    <ol>
      <li>
        <a href="/lessons/cleaning-campaign-finance-data/">Cleaning and grouping campaign finance data</a>
      </li>
    </ol>
  </div>
</footer>
