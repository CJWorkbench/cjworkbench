<header>
  <h1>Summarizing data by grouping<h1>
</header>

<section class="fullscreen">
  <h2>Introduction</h2>
  <p>
    Grouping rows together is one of the most powerful ways of understanding data. This operation is sometimes called “pivot tables” or “Group by”. Its purpose is to summarize large amounts of data quickly.
  <p>
    In this lesson we will continue working with San Francisco Housing data to analyse how many affordable units are planned to be built in each neighborhood of the city.
  </p>
</section>

<!-- Section 1 -->

<script id="initialWorkflow" type="application/json">
  {
    "tabs": [
      {
        "name": "Lesson",
        "wfModules": [
          {
            "module":"loadurl",
            "params": {
              "url":"https://raw.githubusercontent.com/pierreconti/Data/master/cuomo-campaign-contributions.csv"
            }
          }
        ]
      }
    ]
  }
</script>

<section>
  <h2>Grouping and counting</h2>
  <p>In the previous lesson, we filtered <a class="highlight" href='https://data.sfgov.org/Housing-and-Buildings/Affordable-Housing-Pipeline/aaxw-2cb8' target="_blank" className="info-1">San Francisco Housing data</a> to reveal sizable new constructions containing a majority of affordable units. Let’s now ask our data: ‘How many of those new constructions are in each neighborhood?’
  </p>
  <h3 class="instructions">Instructions</h3>
  <ol class="steps">
    <li
      data-highlight='[{"type":"Module","index":0,"name":"Add from URL"}]'
      data-test="return workflow.tabs[0].wfModuleNames[0] === 'Add from URL'"
      >In step 5, add 'Group' and select the column <kbd>State</kbd>.
    </li>
    <li
      data-highlight='[{"type":"Module","index":0,"name":"Add from URL"}]'
      data-test="return workflow.tabs[0].wfModuleNames[0] === 'Add from URL'"
      >Keep the first operation set to <kbd>count</kbd>. It will count all rows within each group.
      <p class ="instruction-detail">
        Since one row is a project and each group is neighborhood, the output table is a count of project per neighborhood.
      </p>
    </li>
    <li
      data-highlight='[{"type":"Module","index":0,"name":"Add from URL"}]'
      data-test="return workflow.tabs[0].wfModuleNames[0] === 'Add from URL'"
      >Name the new  column to <kbd>Number of projects</kbd>.
      <p class ="instruction-detail">
        Next, let’s find out how much units are built in each neighborhood.
      </p>
    </li>
  </ol>
</section>
<section>
  <h2>Operations in groups</h2>
  <p>
    Just counting projects gives us little information about the number of new housing units. Let’s now find out how many affordable units are planned to be built in each number.
  </p>
  <h3 class="instructions">Instructions</h3>
  <ol class="steps">
    <li
      data-highlight='[{"type":"Module","index":0,"name":"Add from URL"}]'
      data-test="return workflow.tabs[0].wfModuleNames[0] === 'Add from URL'"
      >In step 5 Click <kbd>+ADD</kbd> to add a new operation.
    </li>
    <li
      data-highlight='[{"type":"Module","index":0,"name":"Add from URL"}]'
      data-test="return workflow.tabs[0].wfModuleNames[0] === 'Add from URL'"
      >Set it to <kbd>SUM</kbd>, and choose the column <kbd>affordable units</kbd> as the target.
    </li>
    <li
      data-highlight='[{"type":"Module","index":0,"name":"Add from URL"}]'
      data-test="return workflow.tabs[0].wfModuleNames[0] === 'Add from URL'"
      >Name the new column <kbd>Sum of affordable units</kbd>
    </li>
    <li
      data-highlight='[{"type":"Module","index":0,"name":"Add from URL"}]'
      data-test="return workflow.tabs[0].wfModuleNames[0] === 'Add from URL'"
      >Add one more operation and this time calculate the sum of <kbd>market rate</kbd> units, which are the one not subsidized by the city. Name the new column <kbd>Sum of market-rate units</kbd>
    </li>
  </ol>
</section
<section>
<footer>
  <h2>Lesson Complete!</h2>
  <div class="completed">
    <p class="summary"> Next, we’ll learn common splitting and text cleaning tasks, to make it possible to access specific variables.</p>
  </div>
  <div class="next">
    <h2>Next lesson</h2>
    <ol>
      <li>
        <a href="/lessons/split-and-clean/">Cleaning text - part 1</a>
      </li>
    </ol>
  </div>
</footer>
