<header>
  <h1>V. Monitor data and set custom alerts</h1>
  <p>Monitor a data feed and receive an email notification if a condition is true.</p>
  <img src="./banner.svg" alt="">
</header>
<section>
  <h2>OVERVIEW</h2>
  <p>In this tutorial you will learn how to monitor a source to receive an alert if specific data changes.</p>
  <p>You will work with data on Police reports from the City of New York, updated daily. You will analyse that data and set up an alert to be notified if the list of incidents in the borough of Manhattan changes.</p>
</section>
<section>
  <h2>1. Automatic data updates</h2>
  <p>First, let's connect to the data source and set up the step to download any new available data. </p>
  <p>The dataset 'NYPD Complaint Data Current' from the city of New York is published and documented <a href="https://data.cityofnewyork.us/Public-Safety/NYPD-Complaint-Data-Current-Year-To-Date-/5uac-w243/data" class="highlight" target="_blank">here</a>.</p>
  <h3 class="instructions">Instructions</h3>
  <ol class="steps">
    <li
      data-highlight='[{"type":"Module","index":0,"name":"Add from URL"}]'
      data-test="return workflow.tabs[0].wfModuleNames[0] === 'Add from URL'"
      >Add the data source 'Add from URL'.
    </li>
    <li
      data-highlight='[{"type":"WfModule","moduleName":"Add from URL"}]'
      data-test="const wfModule = workflow.tabs[0].wfModules[0]; return wfModule.params.url === 'https://data.cityofnewyork.us/resource/7x9x-zpz6.json?$order=cmplnt_fr_dt%20DESC' && wfModule.selectedVersion"
    >Paste in the following URL and click <kbd>Update</kbd> to load the data.
      <div class="copy-txt">https://data.cityofnewyork.us/resource/7x9x-zpz6.json?$order=cmplnt_fr_dt%20DESC</div>
    </li>
    <li
      data-highlight='[{"type":"WfModule","moduleName":"Add from URL"}]'
      data-test="
        const wfModule = workflow.tabs[0].wfModules[0]
        return wfModule.updateInterval === 18000
      "
      >Click <kbd>manual</kbd> to open the Workflow Update dialog. Set the feature to <kbd>Auto</kbd>, set the frequency to <kbd>5 hours</kbd>, and click <kbd>Apply.</kbd>
    </li>

  </ol>
</section>
<section>
  <h2>2. Filter and set the alert</h2>
  <p>We want to monitor if new police incidents are reported in Manhattan.</p>
  <h3 class="instructions">Instructions</h3>
  <ol class="steps">
    <li
      data-highlight='[{"type":"Module","index":1,"name":"Filter by value"}]'
      data-test="return workflow.tabs[0].wfModuleNames[1] === 'Filter by value'"
      >Add the step 'Filter by value'.
    </li>
    <li
      data-test="return workflow.tabs[0].wfModules[1].params.column === 'boro_nm'"
      >Select the column <kbd>boro_nm</kbd> to filter by.
    </li>
    <li
      data-test="return workflow.tabs[0].wfModules[1].params.valueselect.includes('MANHATTAN')"
      >In ‘Filter by value’, select <kbd>Manhattan</kbd> to get a list of police incidents that have been reported there.
      <p class="instruction-detail">
        We want to be notified if any new incidents is added to this list.
      </p>
    </li>
    <li
      data-test="return workflow.tabs[0].wfModules[1].isEmailUpdates"
      >In the filter step, click on the
      <img class="icon-insert" src="./alert_button.svg"> icon. Turn the alert <kbd>ON</kbd>and close the window.
    </li>
  </ol>
</section>
<footer>
  <h2>Lesson complete!</h2>
  <div class="completed">
    <p class="summary"> Your worfklow is live! It will automatically update to reflect changes in the data and send you an email if the output of the filter changes.</p>
  </div>
  <div class="next">
    <h4>Continue learning:</h4>
    <ol>
      <li>
        <a href="/lessons/scrape-table/">Scrape and monitor a table from a web page.</a>
      </li>
      <li>
        <a href="/lessons/clean-and-standardize/">Scrape a webpage to extract or monitor content</a>
      </li>
    </ol>
  </div>
</footer>
